(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[0],{109:function(t,e,n){t.exports={box:"Filter_box__2QTBD",input:"Filter_input__3pAq9"}},165:function(t,e,n){t.exports={container:"Container_container__3v_6K"}},166:function(t,e,n){t.exports={contacts__list:"ContactList_contacts__list__2ONmd"}},46:function(t,e,n){t.exports={form:"ContactForm_form__2q78-",form__label:"ContactForm_form__label__3JDRl",form__input:"ContactForm_form__input__3PYfl",form__btn:"ContactForm_form__btn__3VSbB"}},501:function(t,e,n){},503:function(t,e,n){"use strict";n.r(e);var a=n(1),c=n.n(a),r=n(25),s=n.n(r),o=n(6),u=n(3),i=n(34),l=n(2),b={link:{display:"inline-block",textDecoration:"none",padding:12,fontWeight:700,color:"#2A363B"},activeLink:{color:"#E84A5F"}},j=function(){return Object(l.jsxs)("nav",{children:[Object(l.jsx)(i.b,{to:"/",exact:"true",style:b.link,activestyle:b.activeLink,children:"Main"}),Object(l.jsx)(i.b,{to:"/contacts",exact:"true",style:b.link,activestyle:b.activeLink,children:"Contacts"})]})},d=n(5),f=n.n(d),m=n(16),p=n(19),O=n.n(p),h=n(9);function x(){return _.apply(this,arguments)}function _(){return(_=Object(m.a)(f.a.mark((function t(){var e,n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O.a.get("/contacts");case 2:return e=t.sent,n=e.data,t.abrupt("return",n);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function v(t){return g.apply(this,arguments)}function g(){return(g=Object(m.a)(f.a.mark((function t(e){var n,a;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O.a.post("/contacts",e);case 2:return n=t.sent,a=n.data,t.abrupt("return",a);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function C(t){return y.apply(this,arguments)}function y(){return(y=Object(m.a)(f.a.mark((function t(e){var n,a;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O.a.delete("/contacts/".concat(e));case 2:return n=t.sent,a=n.data,t.abrupt("return",a);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}O.a.defaults.baseURL="https://connections-api.herokuapp.com";var k,w=function(t){O.a.defaults.headers.common.Authorization="Bearer ".concat(t)},N=function(){O.a.defaults.headers.common.Authorization=""},L=Object(h.c)("auth/register",function(){var t=Object(m.a)(f.a.mark((function t(e){var n,a;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(e),t.prev=1,t.next=4,O.a.post("users/signup",e);case 4:return n=t.sent,a=n.data,w(a.token),console.log(a),t.abrupt("return",a);case 11:t.prev=11,t.t0=t.catch(1),console.log(t.t0);case 14:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e){return t.apply(this,arguments)}}()),S=Object(h.c)("auth/login",function(){var t=Object(m.a)(f.a.mark((function t(e){var n,a;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,O.a.post("users/login",e);case 3:return n=t.sent,a=n.data,w(a.token),t.abrupt("return",a);case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()),I=Object(h.c)("auth/logout",Object(m.a)(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,O.a.post("/users/logout");case 3:N(),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.log(t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))),F=Object(h.c)("auth/refresh",function(){var t=Object(m.a)(f.a.mark((function t(e,n){var a,c,r,s;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=n.getState(),null!==(c=a.auth.token)){t.next=5;break}return console.log("\u0442\u043e\u043a\u0435\u043d\u0430 \u043d\u0435\u0442, \u0443\u0445\u043e\u0434\u0438\u043c"),t.abrupt("return",n.rejectWithValue());case 5:return w(c),t.prev=6,t.next=9,O.a.get("/users/current");case 9:return r=t.sent,s=r.data,t.abrupt("return",s);case 14:t.prev=14,t.t0=t.catch(6),console.log(t.t0);case 17:case"end":return t.stop()}}),t,null,[[6,14]])})));return function(e,n){return t.apply(this,arguments)}}()),A={register:L,logIn:S,logOut:I,fetchCurrentUser:F},z={getIsLoggedIn:function(t){return t.auth.isLoggedIn},getUserName:function(t){return t.auth.user.name}},B=n(8),D=Object(h.e)({name:"auth",initialState:{user:{name:null,email:null},token:null,isLoggedIn:!1},extraReducers:(k={},Object(B.a)(k,A.register.fulfilled,(function(t,e){console.log(t),t.user=e.payload.user,t.token=e.payload.token,t.isLoggedIn=!0})),Object(B.a)(k,A.logIn.fulfilled,(function(t,e){t.user=e.payload.user,t.token=e.payload.token,t.isLoggedIn=!0})),Object(B.a)(k,A.logOut.fulfilled,(function(t,e){t.user={name:null,email:null},t.token=null,t.isLoggedIn=!1})),Object(B.a)(k,A.fetchCurrentUser.fulfilled,(function(t,e){t.user=e.payload,t.isLoggedIn=!0})),k)}).reducer,P=n.p+"static/media/Gubka_BobAvatar.d4072b68.jpg";function q(){var t=Object(o.b)(),e=Object(o.c)(z.getUserName),n=P;return Object(l.jsxs)("div",{className:"user",children:[Object(l.jsx)("img",{src:n,alt:"avatar",width:"32",className:"user__avatar"}),Object(l.jsxs)("span",{className:"user__txt",children:[" Welcome, ",e]}),Object(l.jsx)("button",{type:"button",onClick:function(){return t(A.logOut())},children:"quit"})]})}function U(){return Object(l.jsxs)("div",{className:"nav",children:[Object(l.jsx)(i.b,{to:"/register",exact:"true",style:{fontSize:10},activestyle:"nav__linkActv",children:"Registration"}),Object(l.jsx)(i.b,{to:"/login",exact:"true",style:{fontSize:10},activestyle:"nav__linkActv",children:"Login"})]})}function E(){var t=Object(o.c)(z.getIsLoggedIn);return Object(l.jsxs)("header",{className:"header",children:[Object(l.jsx)(j,{}),t?Object(l.jsx)(q,{}):Object(l.jsx)(U,{})]})}var G=n(165),R=n.n(G);function W(t){var e=t.children;return Object(l.jsx)("div",{className:R.a.container,children:e})}var J,M,Z=n(12),T=Object(h.c)("contacts/fetchContactsGlobal",Object(m.a)(f.a.mark((function t(){var e;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x();case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}),t)})))),V=Object(h.c)("contacts/\u0441ontactsGlobal",function(){var t=Object(m.a)(f.a.mark((function t(e){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v(e);case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),H=Object(h.c)("contacts/deleteContactGlobal",function(){var t=Object(m.a)(f.a.mark((function t(e){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,C(e);case 2:return t.abrupt("return",e);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),K={deleteContact:H,fetchContact:T,addContact:V},Q={getContacts:function(t){return t.contacts.contactsList},getFilter:function(t){return t.contacts.contactsFilter},getLoading:function(t){return t.contacts.loading}},Y=Object(h.b)("contacts/ChangeFilter"),$=n(79),X=n(15),tt=Object(h.d)([],(J={},Object(B.a)(J,K.fetchContact.fulfilled,(function(t,e){return e.payload})),Object(B.a)(J,K.addContact.fulfilled,(function(t,e){var n=e.payload;return[].concat(Object($.a)(t),[n])})),Object(B.a)(J,K.deleteContact.fulfilled,(function(t,e){var n=e.payload;return t.filter((function(t){return t.id!==n}))})),J)),et=Object(h.d)(!1,(M={},Object(B.a)(M,K.fetchContact.pending,(function(){return!0})),Object(B.a)(M,K.fetchContact.fulfilled,(function(){return!1})),Object(B.a)(M,K.fetchContact.rejected,(function(){return!1})),Object(B.a)(M,K.addContact.pending,(function(){return!0})),Object(B.a)(M,K.addContact.fulfilled,(function(){return!1})),Object(B.a)(M,K.addContact.rejected,(function(){return!1})),Object(B.a)(M,K.deleteContact.pending,(function(){return!0})),Object(B.a)(M,K.deleteContact.fulfilled,(function(){return!1})),Object(B.a)(M,K.deleteContact.rejected,(function(){return!1})),M)),nt=Object(h.d)("",Object(B.a)({},Y,(function(t,e){return e.payload}))),at=Object(X.b)({contactsFilter:nt,loading:et,contactsList:tt}),ct=n(505),rt=n(46),st=n.n(rt);function ot(){var t=Object(ct.a)(),e=Object(ct.a)(),n=Object(a.useState)(""),c=Object(Z.a)(n,2),r=c[0],s=c[1],u=Object(a.useState)(""),i=Object(Z.a)(u,2),b=i[0],j=i[1],d=Object(a.useState)(!1),f=Object(Z.a)(d,1)[0],m=Object(o.c)(Q.getContacts),p=Object(o.b)(),O=function(t){var e=t.target,n=e.name,a=e.value;switch(n){case"name":s(a);break;case"number":j(a);break;default:console.warn("Field - ".concat(n," is under constraction"))}},h=function(){s(""),j("")};return Object(l.jsxs)("form",{className:st.a.form,onSubmit:function(t){t.preventDefault();var e={name:r,number:b,id:Object(ct.a)()};if(m.some((function(t){return t.name===e.name})))return alert("Sorry, contact is already in contacts list");p(K.addContact(e)),h()},children:[Object(l.jsx)("label",{className:st.a.form__label,htmlFor:t,children:"Contacts name:"}),Object(l.jsx)("input",{className:st.a.form__input,type:"text",id:t,name:"name",value:r,pattern:"^[a-zA-Z\u0430-\u044f\u0410-\u042f]+(([' -][a-zA-Z\u0430-\u044f\u0410-\u042f ])?[a-zA-Z\u0430-\u044f\u0410-\u042f]*)*$",title:"\u0418\u043c\u044f \u043c\u043e\u0436\u0435\u0442 \u0441\u043e\u0441\u0442\u043e\u044f\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0438\u0437 \u0431\u0443\u043a\u0432, \u0430\u043f\u043e\u0441\u0442\u0440\u043e\u0444\u0430, \u0442\u0438\u0440\u0435 \u0438 \u043f\u0440\u043e\u0431\u0435\u043b\u043e\u0432. \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440 Adrian, Jacob Mercer, Charles de Batz de Castelmore d'Artagnan \u0438 \u0442. \u043f.",required:!0,onChange:O,placeholder:"Will Smith"}),Object(l.jsx)("label",{className:st.a.form__label,htmlFor:e,children:"Contacts number:"}),Object(l.jsx)("input",{className:st.a.form__input,type:"tel",id:e,name:"number",value:b,pattern:"\\+?\\d{1,4}?[-.\\s]?\\(?\\d{1,3}?\\)?[-.\\s]?\\d{1,4}[-.\\s]?\\d{1,4}[-.\\s]?\\d{1,9}",title:"\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430 \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0441\u0442\u043e\u044f\u0442\u044c \u0446\u0438\u0444\u0440 \u0438 \u043c\u043e\u0436\u0435\u0442 \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u043f\u0440\u043e\u0431\u0435\u043b\u044b, \u0442\u0438\u0440\u0435, \u043a\u0440\u0443\u0433\u043b\u044b\u0435 \u0441\u043a\u043e\u0431\u043a\u0438 \u0438 \u043c\u043e\u0436\u0435\u0442 \u043d\u0430\u0447\u0438\u043d\u0430\u0442\u044c\u0441\u044f \u0441 +",required:!0,onChange:O,placeholder:"(097) 222-33-222"}),Object(l.jsx)("button",{className:st.a.form__btn,type:"submit",disabled:f,children:"Add contact"})]})}var ut=n(109),it=n.n(ut);function lt(){var t=Object(o.b)(),e=Object(a.useState)(""),n=Object(Z.a)(e,2),c=n[0],r=n[1],s=it.a.box,u=it.a.input;return Object(l.jsxs)("div",{className:s,children:["Find contacts by name:",Object(l.jsx)("input",{className:u,type:"text",name:"filter",value:c,onChange:function(e){r(e.target.value),t(Y(e.target.value))}})]})}var bt=n(63),jt=n.n(bt);function dt(t){var e=t.name,n=t.number,a=t.id,c=Object(o.b)(),r=jt.a.contacts__item,s=jt.a.contact__name,u=jt.a.contact__number,i=jt.a.contacts__btn;return Object(l.jsxs)("li",{id:a,className:r,children:[Object(l.jsx)("p",{className:s,children:e}),Object(l.jsxs)("p",{className:u,children:["tel: ",n]}),Object(l.jsx)("button",{onClick:function(){return c(K.deleteContact(a))},className:i,children:"Delete contact"})]})}var ft=n(166),mt=n.n(ft);function pt(){var t=Object(o.c)(Q.getContacts),e=Object(o.c)(Q.getFilter);return Object(l.jsx)("ul",{className:mt.a.contacts__list,children:function(){var n=e.toLowerCase();return t.filter((function(t){return t.name.toLowerCase().includes(n)}))}().map((function(t){var e=t.name,n=t.number,a=t.id;return Object(l.jsx)(dt,{name:e,number:n,id:a},a)}))})}function Ot(){var t=Object(o.b)();return Object(a.useEffect)((function(){return t(K.fetchContact())}),[t]),Object(l.jsxs)("div",{children:[Object(l.jsx)("h1",{children:"Phonebook"}),Object(l.jsx)(ot,{}),Object(l.jsx)("h2",{children:"Contacts"}),Object(l.jsx)(lt,{}),Object(l.jsx)(pt,{})]})}var ht=function(){return Object(l.jsx)("div",{className:"home",children:Object(l.jsx)("h1",{className:"home__title",children:"Hello my friends"})})};n(198);function xt(){var t=Object(a.useState)(""),e=Object(Z.a)(t,2),n=e[0],c=e[1],r=Object(a.useState)(""),s=Object(Z.a)(r,2),u=s[0],i=s[1],b=Object(a.useState)(""),j=Object(Z.a)(b,2),d=j[0],f=j[1],m=Object(o.b)(),p=function(t){var e=t.target,n=e.name,a=e.value;switch(n){case"name":return c(a);case"email":return i(a);case"password":return f(a);default:return}};return Object(l.jsxs)("div",{children:[Object(l.jsx)("h1",{children:"Registration page"}),Object(l.jsxs)("form",{className:"form",autoComplete:"off",onSubmit:function(t){t.preventDefault(),m(A.register({name:n,email:u,password:d})),c(""),i(""),f("")},children:[Object(l.jsxs)("label",{className:"form__label",children:["name",Object(l.jsx)("input",{type:"text",name:"name",value:n,onChange:p})]}),Object(l.jsxs)("label",{className:"form__label",children:["email",Object(l.jsx)("input",{type:"text",name:"email",value:u,onChange:p})]}),Object(l.jsxs)("label",{className:"form__label",children:["password",Object(l.jsx)("input",{type:"password",name:"password",value:d,onChange:p})]}),Object(l.jsx)("button",{type:"submit",children:"Go registration"})]})]})}function _t(){var t=Object(a.useState)(""),e=Object(Z.a)(t,2),n=e[0],c=e[1],r=Object(a.useState)(""),s=Object(Z.a)(r,2),u=s[0],i=s[1],b=Object(o.b)(),j=function(t){var e=t.target,n=e.name,a=e.value;switch(n){case"email":return c(a);case"password":return i(a);default:return}};return Object(l.jsxs)("div",{className:"loginPage",children:[Object(l.jsx)("h1",{className:"loginPage__title",children:"Login Page"}),Object(l.jsxs)("form",{className:"form",autoComplete:"off",onSubmit:function(t){t.preventDefault(),b(A.logIn({email:n,password:u})),c(""),i("")},children:[Object(l.jsxs)("label",{className:"form__label",children:["Mail",Object(l.jsx)("input",{className:"form__input",type:"email",name:"email",value:n,onChange:j})]}),Object(l.jsxs)("label",{className:"form__label",children:["Password",Object(l.jsx)("input",{className:"form__input",type:"password",name:"password",value:u,onChange:j})]}),Object(l.jsx)("button",{type:"submit",children:"Log In"})]})]})}function vt(){var t=Object(o.b)();return Object(a.useEffect)((function(){t(A.fetchCurrentUser())}),[t]),Object(l.jsxs)(W,{children:[Object(l.jsx)(E,{}),Object(l.jsx)(a.Suspense,{fallback:"Wreally?)))",children:Object(l.jsxs)(u.c,{children:[Object(l.jsx)(u.a,{exact:!0,path:"/",element:Object(l.jsx)(ht,{})}),Object(l.jsx)(u.a,{exact:!0,path:"/register",element:Object(l.jsx)(xt,{})}),Object(l.jsx)(u.a,{exact:!0,path:"/login",element:Object(l.jsx)(_t,{})}),Object(l.jsx)(u.a,{exact:!0,path:"/contacts",element:Object(l.jsx)(Ot,{})})]})})]})}n(498);var gt=n(35),Ct=n(169),yt=n.n(Ct),kt=Object($.a)(Object(h.f)({serializableCheck:{ignoredActions:[gt.a,gt.f,gt.b,gt.c,gt.d,gt.e]}})),wt={key:"auth",storage:yt.a,whitelist:["token"]},Nt=Object(h.a)({reducer:{auth:Object(gt.g)(wt,D),contacts:at,middleware:kt,devTools:!1}}),Lt=Object(gt.h)(Nt),St=n(170);n(501),n(502);s.a.render(Object(l.jsx)(c.a.StrictMode,{children:Object(l.jsx)(o.a,{store:Nt,children:Object(l.jsx)(St.a,{persistor:Lt,loading:null,children:Object(l.jsx)(i.a,{children:Object(l.jsx)(vt,{})})})})}),document.getElementById("root"))},63:function(t,e,n){t.exports={contacts__item:"ContactItem_contacts__item__3nuPO",contact__name:"ContactItem_contact__name__2qE5Z",contact__number:"ContactItem_contact__number__3Tmzp",contacts__btn:"ContactItem_contacts__btn__2w4OL"}}},[[503,1,2]]]);
//# sourceMappingURL=main.454a2ebd.chunk.js.map