(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[0],{12:function(t,e,n){"use strict";n.d(e,"a",(function(){return h})),n.d(e,"c",(function(){return O})),n.d(e,"b",(function(){return x}));var r,c=n(3),a=n.n(c),u=n(7),o=n(8),s=n.n(o),i=n(5),l=function(t){s.a.defaults.headers.common.Authorization="Bearer ".concat(t)},d=function(){s.a.defaults.headers.common.Authorization=""},b=Object(i.c)("auth/register",function(){var t=Object(u.a)(a.a.mark((function t(e){var n,r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(e),t.prev=1,t.next=4,s.a.post("users/signup",e);case 4:return n=t.sent,r=n.data,l(r.token),t.abrupt("return",r);case 10:t.prev=10,t.t0=t.catch(1),console.log(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}()),f=Object(i.c)("auth/login",function(){var t=Object(u.a)(a.a.mark((function t(e){var n,r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,s.a.post("users/login",e);case 3:return n=t.sent,r=n.data,l(r.token),t.abrupt("return",r);case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()),j=Object(i.c)("auth/logout",Object(u.a)(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,s.a.post("/users/logout");case 3:d(),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.log(t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))),p=Object(i.c)("auth/refresh",function(){var t=Object(u.a)(a.a.mark((function t(e,n){var r,c,u,o;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n.getState(),null!==(c=r.auth.token)){t.next=4;break}return t.abrupt("return",n.rejectWithValue());case 4:return l(c),t.prev=5,t.next=8,s.a.get("/users/current");case 8:return u=t.sent,o=u.data,t.abrupt("return",o);case 13:t.prev=13,t.t0=t.catch(5),console.log(t.t0);case 16:case"end":return t.stop()}}),t,null,[[5,13]])})));return function(e,n){return t.apply(this,arguments)}}()),h={register:b,logIn:f,logOut:j,fetchCurrentUser:p},O={getIsLoggedIn:function(t){return t.auth.isLoggedIn},getUserName:function(t){return t.auth.user.name}},g=n(4),x=Object(i.e)({name:"auth",initialState:{user:{name:null,email:null},token:null,isLoggedIn:!1},extraReducers:(r={},Object(g.a)(r,h.register.fulfilled,(function(t,e){console.log(t),t.user=e.payload.user,t.token=e.payload.token,t.isLoggedIn=!0})),Object(g.a)(r,h.logIn.fulfilled,(function(t,e){t.user=e.payload.user,t.token=e.payload.token,t.isLoggedIn=!0})),Object(g.a)(r,h.logOut.fulfilled,(function(t,e){t.user={name:null,email:null},t.token=null,t.isLoggedIn=!1})),Object(g.a)(r,h.fetchCurrentUser.fulfilled,(function(t,e){t.user=e.payload,t.isLoggedIn=!0})),r)}).reducer},20:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n(5),c=Object(r.b)("contacts/ChangeFilter")},25:function(t,e,n){"use strict";n.d(e,"a",(function(){return v})),n.d(e,"c",(function(){return k})),n.d(e,"b",(function(){return z}));var r=n(3),c=n.n(r),a=n(7),u=n(5),o=n(8),s=n.n(o);function i(){return l.apply(this,arguments)}function l(){return(l=Object(a.a)(c.a.mark((function t(){var e,n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.a.get("/contacts");case 2:return e=t.sent,n=e.data,t.abrupt("return",n);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function d(t){return b.apply(this,arguments)}function b(){return(b=Object(a.a)(c.a.mark((function t(e){var n,r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.a.post("/contacts",e);case 2:return n=t.sent,r=n.data,t.abrupt("return",r);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function f(t){return j.apply(this,arguments)}function j(){return(j=Object(a.a)(c.a.mark((function t(e){var n,r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.a.delete("/contacts/".concat(e));case 2:return n=t.sent,r=n.data,t.abrupt("return",r);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}s.a.defaults.baseURL="https://connections-api.herokuapp.com";var p,h,O=Object(u.c)("contacts/fetchContactsGlobal",Object(a.a)(c.a.mark((function t(){var e;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i();case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}),t)})))),g=Object(u.c)("contacts/\u0441ontactsGlobal",function(){var t=Object(a.a)(c.a.mark((function t(e){var n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d(e);case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),x=Object(u.c)("contacts/deleteContactGlobal",function(){var t=Object(a.a)(c.a.mark((function t(e){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f(e);case 2:return t.abrupt("return",e);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),v={deleteContact:x,fetchContact:O,addContact:g},k={getContacts:function(t){return t.contacts.contactsList},getFilter:function(t){return t.contacts.contactsFilter},getLoading:function(t){return t.contacts.loading}},m=n(20),y=n(4),w=n(22),C=n(6),L=Object(u.d)([],(p={},Object(y.a)(p,v.fetchContact.fulfilled,(function(t,e){return e.payload})),Object(y.a)(p,v.addContact.fulfilled,(function(t,e){var n=e.payload;return[].concat(Object(w.a)(t),[n])})),Object(y.a)(p,v.deleteContact.fulfilled,(function(t,e){var n=e.payload;return t.filter((function(t){return t.id!==n}))})),p)),I=Object(u.d)(!1,(h={},Object(y.a)(h,v.fetchContact.pending,(function(){return!0})),Object(y.a)(h,v.fetchContact.fulfilled,(function(){return!1})),Object(y.a)(h,v.fetchContact.rejected,(function(){return!1})),Object(y.a)(h,v.addContact.pending,(function(){return!0})),Object(y.a)(h,v.addContact.fulfilled,(function(){return!1})),Object(y.a)(h,v.addContact.rejected,(function(){return!1})),Object(y.a)(h,v.deleteContact.pending,(function(){return!0})),Object(y.a)(h,v.deleteContact.fulfilled,(function(){return!1})),Object(y.a)(h,v.deleteContact.rejected,(function(){return!1})),h)),_=Object(u.d)("",Object(y.a)({},m.a,(function(t,e){return e.payload}))),z=Object(C.b)({contactsFilter:_,loading:I,contactsList:L})},35:function(t,e,n){t.exports={container:"Container_container__3v_6K"}},70:function(t,e,n){},72:function(t,e,n){"use strict";n.r(e);var r=n(0),c=n.n(r),a=n(21),u=n.n(a),o=n(11),s=n(2),i=n(13),l=n(1),d={link:{display:"inline-block",textDecoration:"none",padding:12,fontWeight:700,color:"#2A363B"},activeLink:{color:"#E84A5F"}},b=function(){return Object(l.jsxs)("nav",{children:[Object(l.jsx)(i.b,{to:"/",exact:"true",style:d.link,activestyle:d.activeLink,children:"Main"}),Object(l.jsx)(i.b,{to:"/contacts",exact:"true",style:d.link,activestyle:d.activeLink,children:"Contacts"})]})},f=n(12),j=n.p+"static/media/Gubka_BobAvatar.d4072b68.jpg";function p(){var t=Object(o.b)(),e=Object(o.c)(f.c.getUserName),n=j;return Object(l.jsxs)("div",{className:"user",children:[Object(l.jsx)("img",{src:n,alt:"avatar",width:"32",className:"user__avatar"}),Object(l.jsxs)("span",{className:"user__txt",children:[" Welcome, ",e]}),Object(l.jsx)("button",{type:"button",onClick:function(){return t(f.a.logOut())},children:"quit"})]})}function h(){return Object(l.jsxs)("div",{className:"nav",children:[Object(l.jsx)(i.b,{to:"/register",exact:"true",style:{fontSize:10},activestyle:"nav__linkActv",children:"Registration"}),Object(l.jsx)(i.b,{to:"/login",exact:"true",style:{fontSize:10},activestyle:"nav__linkActv",children:"Login"})]})}function O(){var t=Object(o.c)(f.c.getIsLoggedIn);return Object(l.jsxs)("header",{className:"header",children:[Object(l.jsx)(b,{}),t?Object(l.jsx)(p,{}):Object(l.jsx)(h,{})]})}var g=n(35),x=n.n(g);function v(t){var e=t.children;return Object(l.jsx)("div",{className:x.a.container,children:e})}function k(t){var e=t.children,n=t.redirectTo;return Object(o.c)(f.c.getIsLoggedIn)?e:Object(l.jsx)(s.a,{to:n})}function m(t){var e=t.children,n=t.restricted,r=void 0!==n&&n,c=t.redirectTo;return Object(o.c)(f.c.getIsLoggedIn)&&r?Object(l.jsx)(s.a,{to:c}):e}var y=Object(r.lazy)((function(){return n.e(3).then(n.bind(null,81))})),w=Object(r.lazy)((function(){return n.e(4).then(n.bind(null,78))})),C=Object(r.lazy)((function(){return n.e(6).then(n.bind(null,79))})),L=Object(r.lazy)((function(){return n.e(5).then(n.bind(null,80))}));function I(){var t=Object(o.b)();return Object(r.useEffect)((function(){t(f.a.fetchCurrentUser())}),[t]),Object(l.jsxs)(v,{children:[Object(l.jsx)(O,{}),Object(l.jsx)(r.Suspense,{fallback:"Wreally?)))",children:Object(l.jsxs)(s.d,{children:[Object(l.jsx)(s.b,{exact:"true",path:"/",element:Object(l.jsx)(m,{redirectTo:"/",children:Object(l.jsx)(w,{})})}),Object(l.jsx)(s.b,{exact:"true",path:"/register",restricted:!0,element:Object(l.jsx)(m,{restricted:!0,redirectTo:"/contacts",children:Object(l.jsx)(C,{})})}),Object(l.jsx)(s.b,{exact:"true",path:"/login",element:Object(l.jsx)(m,{restricted:!0,redirectTo:"/contacts",children:Object(l.jsx)(L,{})})}),Object(l.jsx)(s.b,{path:"/contacts",element:Object(l.jsx)(k,{redirectTo:"/login",children:Object(l.jsx)(y,{})})})]})})]})}var _=n(22),z=n(5),A=n(14),N=n(36),T=n.n(N),S=n(25),U=Object(_.a)(Object(z.f)({serializableCheck:{ignoredActions:[A.a,A.f,A.b,A.c,A.d,A.e]}})),F={key:"auth",storage:T.a,whitelist:["token"]},B=Object(z.a)({reducer:{auth:Object(A.g)(F,f.b),contacts:S.b,middleware:U,devTools:!1}}),G=Object(A.h)(B),W=n(37);n(70),n(71);u.a.render(Object(l.jsx)(c.a.StrictMode,{children:Object(l.jsx)(o.a,{store:B,children:Object(l.jsx)(W.a,{persistor:G,loading:null,children:Object(l.jsx)(i.a,{children:Object(l.jsx)(I,{})})})})}),document.getElementById("root"))}},[[72,1,2]]]);
//# sourceMappingURL=main.c4925444.chunk.js.map